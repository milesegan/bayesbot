#!/usr/bin/env ruby
# test a running bayes bot with a given dataset
$: << File.dirname(__FILE__)

require 'datafile'
require 'redis'
require 'bayes'

file = DataFile.new(ARGV.first)

r = Redis.new
bcjson = r.get "bc"
bc = Bayes.json_create(bcjson)
file.points.each do |klass, features|
  classified = bc.classify(features)
  puts "#{klass} => #{classified.first.first}"
end
