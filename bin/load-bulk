#!/usr/bin/env ruby
# bulk-loads a dataset from a text file

$: << File.dirname(__FILE__)

require 'redis'
require 'datafile'
require 'bayes'
require 'json'

file = DataFile.new(ARGV.first)

b = Bayes.new
file.points.each do |klass,features|
  b.add_sample(klass, features)
end

r = Redis.new
r.set "bc", JSON.dump(b)

